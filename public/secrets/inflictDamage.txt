function module:inflictDamage(user, target, damage, attackType, attackOrgin, set, multiHit, isBurn)
	local attackerPlayer = Players:GetPlayerFromCharacter(user)
	local targetPlayer = Players:GetPlayerFromCharacter(target)
	local attackerPlayerStats = attackerPlayer and attackerPlayer:FindFirstChild("Stats")
	local targetPlayerStats = targetPlayer and targetPlayer:FindFirstChild("Stats")
	local attackerPlayerCrew = attackerPlayer and attackerPlayer:FindFirstChild"Crew"
	local targetPlayerCrew = targetPlayer and targetPlayer:FindFirstChild"Crew"
	   
	if attackerPlayer and targetPlayer then return end
	
	if attackerPlayer then
		damage *= CalculationLibrary:GetBlacksmithUpgrade(attackerPlayer, user:FindFirstChildWhichIsA("Tool"))
	end  
	
	if targetPlayer and targetPlayer:FindFirstChild("States") and targetPlayer.States:FindFirstChild("Invincible") and targetPlayer.States.Invincible.Value then
		return;
	end
	
	local totalDamage = (
		(attackerPlayerStats and 
			(attackerPlayer.States["Diable Jambe"].Value 
				or attackerPlayer.States["Electricity"].Value 
				or attackerPlayer.States["Fishman"].Value)) 
			and damage*1.2
			or 
			damage
	)

	if attackerPlayer then
		local plrData = _G.DataFunctions.Get(attackerPlayer.UserId)
		local buff = 0

		if plrData.Accessorys.Attributes[attackOrgin] then
			buff = plrData.Accessorys.Attributes[attackOrgin]
		end

		totalDamage = CalculationLibrary:calculateDamage(totalDamage, (attackerPlayerStats and (attackerPlayerStats[attackOrgin].Value + buff)) or 1, attackOrgin)
	else
		totalDamage = CalculationLibrary:calculateDamage(totalDamage, (attackerPlayerStats and attackerPlayerStats[attackOrgin].Value) or 1, attackOrgin)
	end

	if attackerPlayerStats and attackerPlayerStats.Armament.Value and (attackerPlayer.States.Armament.Value or attackerPlayer.States["Sword Armament"].Value or attackerPlayer.States["Gun Armament"].Value) then
		local hakiboost = 1
		hakiboost = ArmamentDamageBoost[attackerPlayerStats['Armament Level'].Value]
		if attackerPlayerStats.AdvancedHakiStage.Value > 0 then
			hakiboost = HakiStagesMultiplier[attackerPlayerStats.AdvancedHakiStage.Value][1]
		end

		if attackerPlayerStats.FinalBuso.Value == true then
			if attackerPlayerStats.HaoMastery.Value >= 2000 then
				hakiboost = 3.7
			elseif attackerPlayerStats.HaoMastery.Value >= 4000 then
				hakiboost = 3.9
			else
				hakiboost = 3.4
			end
		end
		if multiHit then
			totalDamage = ((totalDamage + ((attackerPlayerStats.Haki.Value) / 3.5)) * 1.05) * hakiboost
		else
			totalDamage = (totalDamage + (attackerPlayerStats.Haki.Value)) * hakiboost
		end
	end

	-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --

	if attackerPlayer then
		if attackerPlayer and attackerPlayer:FindFirstChild("Stats") then
			local Data = attackerPlayer.Stats
			if Data then
				-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --

				if Data.Title.Value ~= "" and Data.Title.Value ~= "None" then
					local titlemodule = require(game.ReplicatedStorage.Modules.Titles)
					local titleinfo = titlemodule.GetTitle(Data.Title.Value)
					if titleinfo ~= nil then
						if titleinfo.DamageMulti then
							totalDamage = totalDamage * titleinfo.DamageMulti
						end
					end
				end

				-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --
			end
		end
	end

	if targetPlayer then
		if targetPlayer and targetPlayer:FindFirstChild("Stats") then
			local Data = targetPlayer.Stats
			if Data then
				-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --

				if Data.Title.Value ~= "" and Data.Title.Value ~= "None" then
					local titlemodule = require(game.ReplicatedStorage.Modules.Titles)
					local titleinfo = titlemodule.GetTitle(Data.Title.Value)
					if titleinfo ~= nil then
						if titleinfo.DamageReduce then
							totalDamage = totalDamage / titleinfo.DamageReduce
						end
					end
				end

				-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --
			end
		end
	end

	-------------------------------------------

	if attackerPlayer and attackerPlayer.Character then
		if attackerPlayer.Character:FindFirstChild("Boosts") then
			local boosts = attackerPlayer.Character.Boosts
			for _, v in boosts:GetChildren() do
				if (attackType == "Sword" or attackOrgin == "Sword") and v.Name == "SwordBoost" then
					totalDamage *= v.Value
				elseif (attackType == "Fruit" or attackOrgin == "Fruit") and  v.Name == ("FruitBoost") then
					totalDamage *= v.Value
				elseif (attackType == "Melee" or attackOrgin == "Melee") and  v.Name == ("MeleeBoost") then
					totalDamage *= v.Value
				elseif (attackType == "Gun" or attackOrgin == "Gun") and  v.Name ==("GunBoost") then
					totalDamage *= v.Value
				elseif (attackType == "Logia" or attackOrgin == "Logia") and  v.Name ==("FruitBoost") then
					totalDamage *= v.Value
				elseif attackType == "Haki" and v.Name ==("HakiBoost") then
					totalDamage *= v.Value
				end
			end
		end
	end

	-------------------------------------------

	-- -- -- -- -- --
	
	if attackerPlayer then
		if attackType == "Sword" and attackerPlayer.Character:FindFirstChild("KingOfHell") then
			totalDamage *= 1.9
		end
	end

	if attackerPlayer then
		if attackerPlayer.Character:FindFirstChild("KingOfHell") then
			totalDamage *= 1.5
		end
	end
	
	if attackerPlayer then
		if attackerPlayer.Character:FindFirstChild("SulongForm") then
			if attackType == "Melee" then
				totalDamage *= 2
			else
				totalDamage *= 1.5
			end
		end
	end
	
	if attackType == "Melee" then

		if attackerPlayer and attackerPlayer:FindFirstChild("Stats") then
			local Data = attackerPlayer.Stats
			if Data then
				-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --

				if Data.Title.Value ~= "" and Data.Title.Value ~= "None" then
					local titlemodule = require(game.ReplicatedStorage.Modules.Titles)
					local titleinfo = titlemodule.GetTitle(Data.Title.Value)
					if titleinfo ~= nil then
						if titleinfo.MeleeMulti then
							totalDamage = totalDamage * titleinfo.MeleeMulti
						end
					end
				end

				-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --
			end
		end
		if targetPlayer and targetPlayer:FindFirstChild("Stats") then
			local Data = targetPlayer.Stats
			if Data then

			end
		end

	end

	-- -- -- -- -- --
	  
	if attackType ~= "Gun" then
		if attackerPlayer and attackerPlayer:FindFirstChild("Stats") then
			local overallBuff = 1

			if attackerPlayer.Character:FindFirstChild("SogekingMode") then
				overallBuff += 0.7
			end

			if attackerPlayer.Character:FindFirstChild("GrowUp") then
				overallBuff += 0.4
			end

			totalDamage *= math.clamp(overallBuff, 1, 99)
		end
	end

	if attackType == "Gun" then

		if attackerPlayer and attackerPlayer:FindFirstChild("Stats") then
			local gunBuff = 0

			if attackerPlayer.Character:FindFirstChild("SogekingMode") then
				gunBuff += 2.8
			end

			if attackerPlayer.Character:FindFirstChild("HellsingReleaseMode") then
				gunBuff += 2
			end

			if attackerPlayer.Character:FindFirstChild("GrowUp") then
				gunBuff += 2
			end

			totalDamage *= math.clamp(gunBuff, 1, 99)
		end
		
		if attackerPlayer and attackerPlayer:FindFirstChild("Stats") then
			local Data = attackerPlayer.Stats
			if Data then
				-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --

				if Data.Title.Value ~= "" and Data.Title.Value ~= "None" then
					local titlemodule = require(game.ReplicatedStorage.Modules.Titles)
					local titleinfo = titlemodule.GetTitle(Data.Title.Value)
					if titleinfo ~= nil then
						if titleinfo.GunMulti then
							totalDamage = totalDamage * titleinfo.GunMulti
						end
					end
				end

				-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --
			end
		end
		if targetPlayer and targetPlayer:FindFirstChild("Stats") then
			local Data = targetPlayer.Stats
			if Data then
				-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --

				if Data.Title.Value ~= "" and Data.Title.Value ~= "None" then
					local titlemodule = require(game.ReplicatedStorage.Modules.Titles)
					local titleinfo = titlemodule.GetTitle(Data.Title.Value)
					if titleinfo ~= nil then
						if titleinfo.GunReduce then
							totalDamage = totalDamage / titleinfo.GunReduce
						end
					end
				end

				-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --
			end
		end

	end

	-- -- -- -- -- --

	if attackType == "Sword" then

		if attackerPlayer and attackerPlayer:FindFirstChild("Stats") then
			local Data = attackerPlayer.Stats
			if Data then
				-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --

				if Data.Title.Value ~= "" and Data.Title.Value ~= "None" then
					local titlemodule = require(game.ReplicatedStorage.Modules.Titles)
					local titleinfo = titlemodule.GetTitle(Data.Title.Value)
					if titleinfo ~= nil then
						if titleinfo.SwordMulti then
							totalDamage = totalDamage * titleinfo.SwordMulti
						end
					end
				end

				-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --
			end
		end
		if targetPlayer and targetPlayer:FindFirstChild("Stats") then
			local Data = targetPlayer.Stats
			if Data then
				-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --

				if Data.Title.Value ~= "" and Data.Title.Value ~= "None" then
					local titlemodule = require(game.ReplicatedStorage.Modules.Titles)
					local titleinfo = titlemodule.GetTitle(Data.Title.Value)
					if titleinfo ~= nil then
						if titleinfo.SwordReduce then
							totalDamage = totalDamage / titleinfo.SwordReduce
						end
					end
				end

				-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --
			end
		end

	end

	-- -- -- -- -- --

	if attackOrgin == "Fruit" then

		if attackerPlayer then
			local Data = attackerPlayer.Stats
			if Data then
				-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --

				if Data.Title.Value ~= "" and Data.Title.Value ~= "None" then
					local titlemodule = require(game.ReplicatedStorage.Modules.Titles)
					local titleinfo = titlemodule.GetTitle(Data.Title.Value)
					if titleinfo ~= nil then
						if titleinfo.FruitMulti then
							totalDamage = totalDamage * titleinfo.FruitMulti
						end
					end
				end

				-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --
			end
		end
		if targetPlayer then
			local Data = targetPlayer.Stats
			if Data then

			end
		end

	end

	-- -- -- -- -- --

	if attackType == "Haki" then

		if attackerPlayer then
			local Data = attackerPlayer.Stats
			if Data then
				-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --

				if Data.Title.Value ~= "" and Data.Title.Value ~= "None" then
					local titlemodule = require(game.ReplicatedStorage.Modules.Titles)
					local titleinfo = titlemodule.GetTitle(Data.Title.Value)
					if titleinfo ~= nil then
						if titleinfo.HakiMulti then
							totalDamage = totalDamage * titleinfo.HakiMulti
						end
					end
				end

				-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --
			end
		end
		if targetPlayer then
			local Data = targetPlayer.Stats
			if Data then

			end
		end

	end

	-- -- -- -- -- --

	if attackerPlayer and attackerPlayer:FindFirstChild("Stats") then
		local tooly = attackerPlayer.Character:FindFirstChildWhichIsA("Tool")
		local statss = attackerPlayer.Stats
		if tooly and statss.GiantSmith_Upgrades:FindFirstChild(tooly.Name) then
			totalDamage = totalDamage * (1+statss.GiantSmith_Upgrades[tooly.Name].Value)
		end
	end

	-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --

	if targetPlayer and attackerPlayer then

		local Data1 = _G.DataFunctions.Get(targetPlayer.UserId)
		local Data2 = _G.DataFunctions.Get(attackerPlayer.UserId)

		if Data1 and Data1.Settings2.PVP == false then
			return false
		end
		if Data2 and Data2.Settings2.PVP == false then
			return false
		end

		local AttackerData = attackerPlayer.States.PVP.Value
		local TargetData = targetPlayer.States.PVP.Value

		if AttackerData > 0 or TargetData > 0 then 
			return false
		end
	end

	if targetPlayer and attackerPlayer then
		if targetPlayer.Character then
			for i,v in pairs(safezones) do
				local box = region3.Block(v.CFrame, v.Size)
				local hit = box:FindPartsInRegion3WithWhiteList({target}, math.huge)

				for i,v in pairs(hit) do
					if (v.Parent:FindFirstChild("Humanoid")) then
						return false
					end
				end
			end
		end
	end

	--> This here is to avoid attacking someone without their stats loaded yet and crews
	if targetPlayer and not targetPlayerStats then
		return false
	elseif targetPlayer and attackerPlayer and attackerPlayerCrew and targetPlayerCrew
		and attackerPlayerCrew.Value ~= "" and attackerPlayerCrew.Value == targetPlayerCrew.Value then
		return false	
	end

	if set then
		totalDamage = damage
	end

	local goThroughOb = false

	if attackerPlayer then
		if attackerPlayer.Character then
			if attackerPlayer.Character:FindFirstChild("Snakeman") then
				goThroughOb = true
			end
		end
	end
	  
	if targetPlayer then
		if targetPlayer.Character:FindFirstChild("Limitless") then
			if math.random(1, 100) <= 10 then
				module:dodge(targetPlayer)
				totalDamage = 0

				ReplicatedStorage.Remotes.replicateEffects:FireAllClients("Gojo Dodge", {
					Character = targetPlayer.Character ;
				})

				return false
			end
		end
		if targetPlayer.Character:FindFirstChild("TrueInfinityMode") then
			module:dodge(targetPlayer)
			totalDamage = 0

			ReplicatedStorage.Remotes.replicateEffects:FireAllClients("Gojo Dodge", {
				Character = targetPlayer.Character ;
			})

			return false
		end
		if targetPlayer.Stats and targetPlayer.Stats["Fighting Style"].Value == "Ultra Instinct" then
			local chance = math.random(1,3)
			if targetPlayer.Stats.UnlockedMUI.Value == true and targetPlayer.Character:FindFirstChild("MUI") then

				if chance == 1 or chance == 2 then
					module:dodge(targetPlayer)
					totalDamage = 0

					ReplicatedStorage.Remotes.replicateEffects:FireAllClients("Gojo Dodge", {
						Character = targetPlayer.Character ;
					})

					return false
				end

			else

				if chance == 1 then
					module:dodge(targetPlayer)
					totalDamage = 0

					ReplicatedStorage.Remotes.replicateEffects:FireAllClients("Gojo Dodge", {
						Character = targetPlayer.Character ;
					})

					local PlayerData = _G.DataFunctions.Get(targetPlayer.UserId)
					if PlayerData then
						PlayerData.Stats["UIDodges"] += 1
					end

					return false
				end

			end
		end
		if targetPlayer.Character:FindFirstChild("BerserkArmorMode") then
			if math.random(1, 100) <= 10 then
				module:dodge(targetPlayer)
				totalDamage = 0
				return false
			end
		end
		if targetPlayer.Character:FindFirstChild("HellsingReleaseMode") then
			if math.random(1, 100) <= 5 then
				module:dodge(targetPlayer)
				totalDamage = 0
				return false
			end
		end
	end

	if attackType == "Melee" or attackType == "Gun" then

		if targetPlayer and targetPlayer.States.Observation.Value and not goThroughOb then
			if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("NewHakiDodges") then
				if targetPlayer.Character.NewHakiDodges.Value >= 1 then
					module:dodge(targetPlayer)
					return false
				end
			else
				module:dodge(targetPlayer)
				return false
			end
		elseif targetPlayer and targetPlayer.States.Invincible.Value then
			return false
		elseif targetPlayer and targetPlayerStats then
			if FruitData[targetPlayerStats["Devil Fruit"].Value] and FruitData[targetPlayerStats["Devil Fruit"].Value].Type == "Logia" then
				--> If haki
				if attackerPlayer and attackerPlayerStats and attackerPlayerStats.Armament.Value and (attackerPlayer.States.Armament.Value or attackerPlayer.States["Gun Armament"].Value or attackerPlayer.States["Sword Armament"].Value) then
					module:inflictDamage2(user, target, totalDamage, isBurn)
					return true
				elseif user:FindFirstChild"Data" and user.Data.Haki.Value then
					module:inflictDamage2(user, target, totalDamage, isBurn)

					return true
				else -- If no haki then

					module:displayLogia(targetPlayer)
					return false
				end
			else

				module:inflictDamage2(user, target, totalDamage, isBurn)
				return true
			end
		else
			--			print"inflict"
			module:inflictDamage2(user, target, totalDamage, isBurn)
			return true
		end
	elseif attackType == "Sword" then
		if targetPlayer and targetPlayer.States.Observation.Value and not goThroughOb then
			if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("NewHakiDodges") then
				if targetPlayer.Character.NewHakiDodges.Value >= 1 then
					module:dodge(targetPlayer)
					return false
				end
			else
				module:dodge(targetPlayer)
				return false
			end
		elseif targetPlayer and targetPlayerStats["Devil Fruit"].Value == "Chop Fruit" then
			animation:FireClient(targetPlayer, "Play", ReplicatedStorage.Animations.Chop.Dodge)

			return false
		elseif target and target.Name == "Captain Buggy" then

			return false
		elseif user and user:FindFirstChild"Data" and user.Data.Haki.Value then
			module:inflictDamage2(user, target, totalDamage, isBurn)
			return true
		elseif attackerPlayer 
			and not attackerPlayer.States["Sword Armament"].Value 
			and targetPlayer
			and targetPlayerStats and FruitData[targetPlayerStats["Devil Fruit"].Value] 
			and FruitData[targetPlayerStats["Devil Fruit"].Value].Type == "Logia" then
			module:displayLogia(targetPlayer)
			return false
		elseif targetPlayer and targetPlayer.States.Invincible.Value then
			return false
		else
			--print"normal"
			module:inflictDamage2(user, target, totalDamage, isBurn)
			return true
		end
	elseif attackType == "Logia" then
		--> If the target is a player and they have observation
		if targetPlayer and targetPlayer.States.Observation.Value and not goThroughOb then
			if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("NewHakiDodges") then
				if targetPlayer.Character.NewHakiDodges.Value >= 1 then
					module:dodge(targetPlayer)
					return false
				end
			else
				module:dodge(targetPlayer)
				return false
			end
			--> If the target is a player and is invincible
		elseif targetPlayer and targetPlayer.States.Invincible.Value then
			return false
		elseif targetPlayer and targetPlayerStats["Devil Fruit"].Value == "Rubber Fruit" and attackerPlayer and attackerPlayer.Stats["Devil Fruit"].Value == "Lightning Fruit" then
			return false
		else
			module:inflictDamage2(user, target, totalDamage, isBurn)
			return true			
		end
	elseif attackType == "Haki" then
		if targetPlayer and targetPlayer.States.Invincible.Value then
			return false
		else
			module:inflictDamage2(user, target, totalDamage, isBurn)
			return true
		end
	end
end