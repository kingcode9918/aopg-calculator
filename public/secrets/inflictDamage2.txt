function module:inflictDamage2(user, target, damage, IsBurn)
	if target == nil then return end

	local Player1 = Players:GetPlayerFromCharacter(user)
	local Humanoid = target:WaitForChild("Humanoid",2)

	local Player = Players:GetPlayerFromCharacter(target)
	
	if Player and Player:FindFirstChild("States") and Player.States:FindFirstChild("Invincible") and Player.States.Invincible.Value then
		return;
	end
	
	
	
	if Player and Players:GetPlayerFromCharacter(user) then
		module:combatTag(Player, Settings.COMBAT_TAG_DURATION, (Players:GetPlayerFromCharacter(user) or nil))
	end

	if Humanoid then
		--> Reward defence
		local previousHealth = Humanoid.Health



		--	local ConstructedEntity = workspace.Entities[target.Name].Humanoid
		--ConstructedEntity:TakeDamage(damage)

		--	warn("DAMAGE:", damage)

		if Player1 then

			if Player1:FindFirstChild("Stats") and Player1:FindFirstChild("Upgrades") then
				if Player1.Stats.Race.Value == "Germa" and Player1.Upgrades.Exoskeleton.Value == true then
					damage = damage * 1.2
				end
			end

			if Player1:FindFirstChild("Stats") and Player1:FindFirstChild("Upgrades") then
				if Player1.Stats.Race.Value == "Lunarian" then
					damage = damage * 1.3
				end
			end

			if Player1:FindFirstChild("Stats") and Player1:FindFirstChild("Upgrades") then
				if Player1.Stats.Race.Value == "Easter Bunny" then
					damage = damage * 1.3
				end
			end

			if Player1:FindFirstChild("Stats") and Player1:FindFirstChild("Upgrades") then
				if Player1.Stats.Race.Value == "Jinchuriki" then
					damage = damage * 1.3
				end
			end

			if Player1:FindFirstChild("Stats") and Player1:FindFirstChild("Upgrades") then
				if Player1.Stats.Race.Value == "Heavenly Restricted" then
					damage = damage * 1.5
				end
				if Player1.Stats.Race.Value == "Buccaneer" then
					damage = damage * 1.5
				end
				if Player1.Stats.Race.Value == "Shandian" then
					damage = damage * 2
				end
				if Player1.Stats.Race.Value == "Perfect Lunatrix" then
					damage = damage * 2.45
				end
				if Player1.Stats.Race.Value == "Oni" then
					damage = damage * 2.4
				end
			end

			if Player1:FindFirstChild("Stats") and Player1:FindFirstChild("Upgrades") then
				if Player1.Stats.Race.Value == "Sorcerer" then
					damage = damage * 1.4
				end
			end

			if Player1:FindFirstChild("Stats") and Player1:FindFirstChild("Upgrades") then
				if Player1.Upgrades.CyberEnhance.Value == true then
					if Player1.Stats.Race.Value == "Cyborg" then
						damage = damage * 1.2
					else
						damage = damage * 1.1
					end
				end
			end

			if Player1:FindFirstChild("Stats") and Player1:FindFirstChild("Upgrades") then
				if Player1.Stats.Race.Value == "Saiyan" then
					if Player1.Character.Humanoid.Health >= (Player1.Character.Humanoid.MaxHealth*0.7) then
						damage = damage * 1.2
					else
						damage = damage * 1.3
					end
				end
				if Player1.Stats.Race.Value == "Santa" then
					damage = damage * 1.2
				end
			end

			if Player1.Character:FindFirstChild("HornOfSalvation") then
				damage *= 1.7
			end

			if Player1.Character:FindFirstChild("ChainsawFull") then
				damage *= 2
			end

			if Player1.Character:FindFirstChild("AwakenedFishmanMode") then
				damage *= 1.2
			end

			if Player1.Character:FindFirstChild("CloakMode") then
				damage *= 1.9
			end

			if Player1.Character:FindFirstChild("ChainsawManHybrid") then
				damage *= 1.5
			end

			if Player1.Character:FindFirstChild("RaidSuit") then
				damage *= 1.5
			end

			if Player1.Character:FindFirstChild("SuperSaiyan") then
				damage *= 1.8
			end

			if Player1.Character:FindFirstChild("DengekiBlueMode") then
				damage *= 1.2
			end

			if Player1.Character:FindFirstChild("EnergyFist") then
				damage *= 1.4
			end

			if Player1.Character:FindFirstChild("Limitless") then
				damage *= 2.2
			end

			if Player1.Character:FindFirstChild("AwakenedLeopardForm") then
				damage *= 1.3
			end

			if Player1.Character:FindFirstChild("VampireHybridForm") then
				damage *= 1.2
			end

			if Player1.Character:FindFirstChild("VampireFullForm") then
				damage *= 1.3
			end

			if Player1.Character:FindFirstChild("HawkEyes") then
				damage *= 1.7
			end

			if Player1.Character:FindFirstChild("HeroMode") then
				damage *= 1.4
			end

			if Player1.Character:FindFirstChild("FlamePipeMode") then
				damage *= 1.8
			end

			if Player1.Character:FindFirstChild("DragonClawMode") then
				damage *= 1.5
			end

			if Player1.Character:FindFirstChild("BerserkArmorMode") then
				damage *= 2.1
			end

			if Player1.Character:FindFirstChild("EnelFullForm") then
				damage *= 1.6
			end

			if Player1.Character:FindFirstChild("RogersMode") then
				damage *= 2.1
			end

			if Player1.Character:FindFirstChild("KingOfCursesMode") then
				damage *= 1.7
			end

			if Player1.Character:FindFirstChild("RageOfWanoMode") then
				damage *= 1.8
			end

			if Player1.Character:FindFirstChild("IceOniMode") then
				damage *= 1.2
			end
			if Player1.Character:FindFirstChild("ColdChoicePurple") then
				damage *= 1.5
			end




			if Player1 and Player1.Character and Player1.Character:FindFirstChild("Boosts") then
				local total = 1
				for i,v in pairs(Player1.Character.Boosts:GetChildren()) do
					if v.Name == "DamageBoost" then
						total *= v.Value
					end
				end
				damage *= total
			end
			
			-- toji

			if Player1.Character:FindFirstChild("Playful Cloud") then
				damage *= 1.7
			end
			if Player1.Character:FindFirstChild("Split-Soul Katana") then
				damage *= 2.2
			end
			if Player1.Character:FindFirstChild("Inverted Spear Of Heaven") then
				damage *= 2.5
			end
			
			

			-- Vix Transfer Race Awakening

			if Player1 and Player1:FindFirstChild("Upgrades") then
				local upgrades = Player1.Upgrades
				local stats = Player1.Stats
				if upgrades.MinkAwakened.Value == true and stats.Race.Value == "Mink" then
					damage *= 1.3
				end
				if upgrades.HumanAwakened.Value == true and stats.Race.Value == "Human" then
					damage *= 1.25
				end
				if upgrades.SkypianAwakened.Value == true and stats.Race.Value == "Skypian" then
					damage *= 1.4
				end
				if upgrades.FishmanAwakened.Value == true and stats.Race.Value == "Fishman" then
					if Player1.States.Swimming.Value == true then
						damage *= 1.8
					else
						damage *= 1.2
					end
				end
			end

			-- Vix Transfer Race Awakening

			if not IsBurn then
				if Player1.Character:FindFirstChild("PoisonPinkMode") then
					inflictPoison(Player1, target)
				end
			end
		end

		local targetPlayer = game.Players:GetPlayerFromCharacter(target)
		if targetPlayer then
			
			if targetPlayer and targetPlayer:FindFirstChild("Stats") then
				local Data = targetPlayer.Stats
				if Data then
					-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --

					if Data.Title.Value ~= "" and Data.Title.Value ~= "None" then
						local titleinfo = titlemodule.GetTitle(Data.Title.Value)
						if titleinfo ~= nil then
							if titleinfo.DamageReduce then
								damage = damage / titleinfo.DamageReduce
							end
						end
					end

					-- -- -- -- -- -- -- Title Passives -- -- -- -- -- -- --
				end
			end
		end

		if game.Players:GetPlayerFromCharacter(target) then
			local ePlayer = game.Players:GetPlayerFromCharacter(target)

			--toji

			if ePlayer and ePlayer.Character and ePlayer.Character:FindFirstChild("Boosts") then
				local total = 1
				for i,v in pairs(ePlayer.Character.Boosts:GetChildren()) do
					if v.Name == "DefenseBoost" then
						total += v.Value
					end
				end
				damage /= total
			end

			if ePlayer and ePlayer.Character and ePlayer.Character:FindFirstChild("Split-Soul Katana") then
				damage /= 1.5
			end
			if ePlayer and ePlayer.Character and ePlayer.Character:FindFirstChild("Inverted Spear Of Heaven") then
				damage /= 2.3
			end

			if ePlayer and ePlayer.Character and ePlayer.Character:FindFirstChild("DragonClawMode") then
				damage /= 1.3
			end

			if ePlayer and ePlayer.Character and ePlayer.Character:FindFirstChild("BerserkArmorMode") then
				damage /= 1.5
			end

			if ePlayer and ePlayer.Character and ePlayer.Character:FindFirstChild("GrowUp") then
				damage /= 1.7
			end
			if ePlayer and ePlayer.Character and ePlayer.Character:FindFirstChild("HeroMode") then
				damage /= 1.3
			end
			if ePlayer and ePlayer.Character and ePlayer.Character:FindFirstChild("HellsingReleaseMode") then
				damage /= 1.3
			end
			if ePlayer and ePlayer.Character and ePlayer.Character:FindFirstChild("SuperSaiyan") then
				damage /= 1.5
			end
			if ePlayer and ePlayer.Character and ePlayer.Character:FindFirstChild("CloakMode") then
				damage /= 1.5
			end
			if ePlayer and ePlayer.Character and ePlayer.Character:FindFirstChild("Limitless") then
				damage /= 2
			end
			if ePlayer and ePlayer.Character and ePlayer.Character:FindFirstChild("HawkEyes") then
				damage /= 1.5
			end
			if ePlayer and ePlayer.Character and ePlayer.Character:FindFirstChild("AwakenedFishmanMode") then
				damage /= 1.25
			end

			-- Vix Transfer Race Awakening

			if ePlayer and ePlayer:FindFirstChild("Upgrades") then
				if ePlayer.Upgrades.MinkAwakened.Value == true and ePlayer.Stats.Race.Value == "Mink" then
					damage /= 1.3
				end
				if ePlayer.Upgrades.HumanAwakened.Value == true and ePlayer.Stats.Race.Value == "Human" then
					damage /= 1.25
				end
				if ePlayer.Upgrades.SkypianAwakened.Value == true and ePlayer.Stats.Race.Value == "Skypian" then
					damage /= 1.2
				end
				if ePlayer.Upgrades.FishmanAwakened.Value == true and ePlayer.Stats.Race.Value == "Fishman" then
					if ePlayer.States.Swimming.Value == true then
						damage /= 1.8
					else
						damage /= 1.2
					end
				end
			end

			-- Vix Transfer Race Awakening

			if ePlayer:FindFirstChild("Stats") then
				if ePlayer.Stats.Race.Value == "Saiyan" then
					if ePlayer.Character.Humanoid.Health >= (ePlayer.Character.Humanoid.MaxHealth*0.7) then
						damage /= 1.2
					else
						damage /= 1.4
					end
				end
				if ePlayer.Stats.Race.Value == "Lunarian" then
					damage /= 1.2
				end
				if ePlayer.Stats.Race.Value == "Easter Bunny" then
					damage /= 1.2
				end
				if ePlayer.Stats.Race.Value == "Santa" then
					damage /= 1.2
				end
				if ePlayer.Stats.Race.Value == "Perfect Lunatrix" then
					damage /= 1.3
				end
				if ePlayer.Stats.Race.Value == "Oni" then
					damage /= 2.4
				end
			end
			if ePlayer.Stats.Race.Value == "Cyborg" then
				if ePlayer.Character:FindFirstChild("CyborgMode") then
					damage /= 1.5
				else
					damage /= 1.25
				end
			end
		end

		local death_position = nil

		--Humanoid:TakeDamage(damage)

		if not Humanoid.Parent:FindFirstChildOfClass("ForceField") then
			local Healh = Humanoid.Health
			Humanoid.Health = math.max(Healh - damage, 0)
		end

		if target then
			death_position = target.PrimaryPart.CFrame
		end

		if Player1 then

			combo:FireClient(Player1)

			pcall(function()
				if target.Parent.Name ~= "Spawner" then
					local Settings = Player1:WaitForChild("Settings2")

					if Settings["Damage Display"].Value then
						--game.ReplicatedStorage.Remotes.DamageCounter:FireClient(Player1, previousHealth - Humanoid.Health)
						game.ReplicatedStorage.Remotes.DamageCounter:FireClient(Player1, damage)
					end
				end
			end) 

			if Player1 and target and target.Name ~= "Training Dummy" then
				if not target:FindFirstChild("DamageTags") then
					local Tags = Instance.new("Folder")
					Tags.Name = "DamageTags"
					Tags.Parent = target
				end
				if target:FindFirstChild("DamageTags") then
					if not target.DamageTags:FindFirstChild(Player1.Name) then
						local count = Instance.new("IntValue")
						count.Name = Player1.Name
						count.Value = damage
						count.Parent = target.DamageTags
					else
						target.DamageTags[Player1.Name].Value += damage
					end
				end
			end

			if Player1 and Player1.Character and Player1:FindFirstChild("Stats") then
				if Player1.Stats.Artifact.Value == "Pinpoint" then
					if not Player1.Character:FindFirstChild("PinpointCooldown") then
						local chance = math.random(1,3)
						if chance == 1 then
							local cd = Instance.new("Folder")
							cd.Name = "PinpointCooldown"
							cd.Parent = Player1.Character
							game:GetService("Debris"):AddItem(cd, 5)

							module:inflictDamage(Player1.Character, target, (damage*0.2), "Logia", "Fruit", true)

							ReplicatedStorage.Remotes.replicateEffects:FireAllClients("PinpointProc", {
								Character = Player1.Character ,
								Pos = target.PrimaryPart.CFrame * CFrame.new(0,4,-2)
							})
						end
					end
				end
			end

			if Player1 and Player1.Character and Player1:FindFirstChild("Stats") then
				if Player1.Stats.Artifact.Value == "Fire Body" then
					if not Player1.Character:FindFirstChild("FireBodyCooldown") then
						local cd = Instance.new("Folder")
						cd.Name = "FireBodyCooldown"
						cd.Parent = Player1.Character
						game:GetService("Debris"):AddItem(cd, 10)
						local chance = math.random(1,4)
						if chance == 1 then
							local aura = game.ReplicatedStorage.Assets.Abilities["Self Healing"].Burn:Clone()
							aura.Weld.Part1 = target.PrimaryPart
							aura.Parent = workspace.Visuals
							game:GetService("Debris"):AddItem(aura, 6)
							task.spawn(function()
								for i,v in pairs(aura:GetChildren()) do
									if v:IsA("ParticleEmitter") then
										v.Enabled = true
									end
								end
								task.wait(5)
								for i,v in pairs(aura:GetChildren()) do
									if v:IsA("ParticleEmitter") then
										v.Enabled = false
									end
								end
							end)
							coroutine.resume(coroutine.create(function()
								local procdmg = damage*0.1
								for i = 1,10 do
									module:inflictDamage(Player1.Character, target, procdmg/10, "Logia", "Fruit", true, false, true)
									task.wait(0.5)
								end
							end))
						end
					end
				end
			end

			if Humanoid.Health <= 0 and previousHealth > 0 then

				if Player1 and Player1.Character and Player1:FindFirstChild("Stats") then
					if Player1.Stats.Artifact.Value == "Dismiss" then
						if not Player1.Character:FindFirstChild("DismissCooldown") then
							local chance = math.random(1,4)
							if chance == 1 then
								local cd = Instance.new("Folder")
								cd.Name = "DismissCooldown"
								cd.Parent = Player1.Character
								game:GetService("Debris"):AddItem(cd, 15)
								Player1.States.Invincible.Value = true
								task.spawn(function()
									task.wait(6)
									if Player1 then
										Player1.States.Invincible.Value = false
									end
								end)
								ReplicatedStorage.Remotes.replicateEffects:FireAllClients("ReynaDismiss", {
									Character = Player1.Character ,
									Pos = death_position
								})
							end
						end
					end
				end

				if target:FindFirstChild("DamageTags") then
					for i,v in pairs(target.DamageTags:GetChildren()) do
						if v.Value > (Humanoid.MaxHealth/5) then
							if game:GetService("Players"):FindFirstChild(v.Name) then
								module:rewardKill(game.Players[v.Name], target)
							end
						end
					end
				end
			end

		end

	end
end